{"version":3,"file":"index.js","sources":["../src/js/api.js","../src/js/render.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport function getImage(userQuery, currentPage) {\n  const options = {\n    params: {\n      client_id: 'DwCHWnjztYkOGjaSpMHjMrexfDmKfCckrOyGxBw2Hwo',\n      query: userQuery,\n      page: currentPage,\n      per_page: 12,\n    },\n  };\n\n  return axios.get(`https://api.unsplash.com/search/photos`, options);\n}\n","export function getCard(img) {\n  const { alt_description, urls } = img;\n  return `   <li>\n        <a href=\"${urls.regular}\">\n          <img src=\"${urls.small}\" alt=\"${alt_description}\" class='img'>\n            <p>${alt_description}</p>\n          </img>\n        </a>\n      </li>`;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getImage } from './js/api';\nimport { getCard } from './js/render';\n\nlet page = 1;\nlet userQuery = '';\n\nconst formRef = document.querySelector('.js-form');\nconst galRef = document.querySelector('.js-gallery');\nconst moreRef = document.querySelector('.js-more');\n\nformRef.addEventListener('submit', onSubmit);\n\nasync function onSubmit(ev) {\n  ev.preventDefault();\n  userQuery = ev.target.elements.query.value.trim();\n\n  if (!userQuery) {\n    iziToast.warning({\n      message: 'No query!',\n      position: 'center',\n    });\n    return;\n  }\n\n  try {\n    page = 1;\n    moreRef.classList.add('hidden');\n    const { data } = await getImage(userQuery, page);\n    if (data.total === 0) {\n      iziToast.error({\n        title: 'Error!',\n        message: 'No images found for your query',\n        position: 'center',\n      });\n      galRef.innerHTML = '';\n      formRef.reset();\n      return;\n    }\n\n    if (data.total_pages > 1) {\n      moreRef.classList.remove('hidden');\n      moreRef.addEventListener('click', onMore);\n    }\n    const markup = data.results.map(img => getCard(img)).join('');\n    galRef.innerHTML = markup;\n\n    if (page === data.total_pages) {\n      moreRef.classList.add('hidden');\n      moreRef.removeEventListener('click', onMore);\n    }\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nasync function onMore() {\n  try {\n    page += 1;\n    const { data } = await getImage(userQuery, page);\n    const markup = data.results.map(img => getCard(img)).join('');\n    galRef.insertAdjacentHTML('beforeend', markup);\n  } catch (err) {\n    console.log(err);\n  }\n}\n"],"names":["getImage","userQuery","currentPage","options","axios","getCard","img","alt_description","urls","page","formRef","galRef","moreRef","onSubmit","ev","iziToast","data","onMore","markup","err"],"mappings":"6vBAEO,SAASA,EAASC,EAAWC,EAAa,CAC/C,MAAMC,EAAU,CACd,OAAQ,CACN,UAAW,8CACX,MAAOF,EACP,KAAMC,EACN,SAAU,EACX,CACL,EAEE,OAAOE,EAAM,IAAI,yCAA0CD,CAAO,CACpE,CCbO,SAASE,EAAQC,EAAK,CAC3B,KAAM,CAAE,gBAAAC,EAAiB,KAAAC,CAAM,EAAGF,EAClC,MAAO;AAAA,mBACUE,EAAK,OAAO;AAAA,sBACTA,EAAK,KAAK,UAAUD,CAAe;AAAA,iBACxCA,CAAe;AAAA;AAAA;AAAA,YAIhC,CCJA,IAAIE,EAAO,EACPR,EAAY,GAEhB,MAAMS,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,aAAa,EAC7CC,EAAU,SAAS,cAAc,UAAU,EAEjDF,EAAQ,iBAAiB,SAAUG,CAAQ,EAE3C,eAAeA,EAASC,EAAI,CAI1B,GAHAA,EAAG,eAAc,EACjBb,EAAYa,EAAG,OAAO,SAAS,MAAM,MAAM,OAEvC,CAACb,EAAW,CACdc,EAAS,QAAQ,CACf,QAAS,YACT,SAAU,QAChB,CAAK,EACD,MACD,CAED,GAAI,CACFN,EAAO,EACPG,EAAQ,UAAU,IAAI,QAAQ,EAC9B,KAAM,CAAE,KAAAI,CAAI,EAAK,MAAMhB,EAASC,EAAWQ,CAAI,EAC/C,GAAIO,EAAK,QAAU,EAAG,CACpBD,EAAS,MAAM,CACb,MAAO,SACP,QAAS,iCACT,SAAU,QAClB,CAAO,EACDJ,EAAO,UAAY,GACnBD,EAAQ,MAAK,EACb,MACD,CAEGM,EAAK,YAAc,IACrBJ,EAAQ,UAAU,OAAO,QAAQ,EACjCA,EAAQ,iBAAiB,QAASK,CAAM,GAE1C,MAAMC,EAASF,EAAK,QAAQ,IAAIV,GAAOD,EAAQC,CAAG,CAAC,EAAE,KAAK,EAAE,EAC5DK,EAAO,UAAYO,EAEfT,IAASO,EAAK,cAChBJ,EAAQ,UAAU,IAAI,QAAQ,EAC9BA,EAAQ,oBAAoB,QAASK,CAAM,EAE9C,OAAQE,EAAK,CACZ,QAAQ,IAAIA,CAAG,CAChB,CACH,CAEA,eAAeF,GAAS,CACtB,GAAI,CACFR,GAAQ,EACR,KAAM,CAAE,KAAAO,CAAI,EAAK,MAAMhB,EAASC,EAAWQ,CAAI,EACzCS,EAASF,EAAK,QAAQ,IAAIV,GAAOD,EAAQC,CAAG,CAAC,EAAE,KAAK,EAAE,EAC5DK,EAAO,mBAAmB,YAAaO,CAAM,CAC9C,OAAQC,EAAK,CACZ,QAAQ,IAAIA,CAAG,CAChB,CACH"}